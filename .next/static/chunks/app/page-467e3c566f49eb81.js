(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6755:(e,t,a)=>{Promise.resolve().then(a.bind(a,9298))},7790:()=>{},9298:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),n=a(2115),r=a(9750),i=a(6343);let l=JSON.parse('{"version":"0.1.0","name":"solana_counter","instructions":[{"name":"initialize","accounts":[{"name":"counter","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","value":[99,111,117,110,116,101,114]}]}},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false,"address":"11111111111111111111111111111111"}],"args":[]},{"name":"increment","accounts":[{"name":"counter","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","value":[99,111,117,110,116,101,114]}]}},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false,"address":"11111111111111111111111111111111"}],"args":[{"name":"payment","type":"u64"}]},{"name":"decrement","accounts":[{"name":"counter","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","value":[99,111,117,110,116,101,114]}]}},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false,"address":"11111111111111111111111111111111"}],"args":[{"name":"payment","type":"u64"}]}],"accounts":[{"name":"Counter","type":{"kind":"struct","fields":[{"name":"count","type":"u64"}]}}],"errors":[{"code":6000,"name":"InsufficientPayment","msg":"Payment is insufficient"},{"code":6001,"name":"CounterUnderflow","msg":"Counter cannot go below zero"}]}');var c=a(8308).Buffer;let o=new r.PublicKey("DGmJsbjsife1p3QoueUruomvJXLaYXMwqEFgE4bV4xrg");function d(){let[e,t]=(0,n.useState)(null),[a,d]=(0,n.useState)(0),[m,u]=(0,n.useState)(!1),[x,g]=(0,n.useState)(null),[b,f]=(0,n.useState)(null),[h,w]=(0,n.useState)(!1),[y,p]=(0,n.useState)(null),[j,N]=(0,n.useState)(!1),v=new r.Connection((0,r.clusterApiUrl)("devnet"),"confirmed"),S=()=>{try{let{solana:e}=window;if(!e||!e.isPhantom||!e.publicKey)return console.log("Phantom Wallet tidak terdeteksi atau tidak terhubung"),null;let t={publicKey:e.publicKey,signTransaction:e.signTransaction,signAllTransactions:e.signAllTransactions};return new i.NQ(v,t,{preflightCommitment:"confirmed"})}catch(e){return console.error("Error saat membuat provider:",e),null}},k=async()=>{let{solana:e}=window;if(e&&e.isPhantom)try{let a=await e.connect({onlyIfTrusted:!0});t(a.publicKey.toString()),u(!0);let s=S();g(s),s&&await B(s)}catch(e){console.log("Wallet belum terhubung:",e)}},P=async()=>{try{let{solana:e}=window;if(!e)throw Error("Phantom Wallet tidak ditemukan");let a=await e.connect();t(a.publicKey.toString()),u(!0);let s=S();g(s),s&&await B(s)}catch(e){p("Gagal menghubungkan wallet: ".concat(e instanceof Error?e.message:String(e)))}},C=async()=>{let[e]=await r.PublicKey.findProgramAddress([c.from("counter")],o);return e},B=async e=>{if(!e){p("Provider tidak tersedia");return}try{let t=await C();f(t),await A(e,t),N(!0)}catch(e){p("Counter belum diinisialisasi. Silakan klik 'Inisialisasi Counter'. ".concat(e instanceof Error?e.message:String(e)))}},E=async()=>{if(!x){p("Provider belum diinisialisasi");return}w(!0),p(null);try{let e=new i.BP(l,o,x),t=await C(),a=await e.methods.initialize().accounts({counter:t,user:x.wallet.publicKey,systemProgram:r.SystemProgram.programId}).rpc({commitment:"confirmed"});console.log("Transaksi initialize dikirim. Signature:",a),await v.confirmTransaction(a,"confirmed"),f(t),await new Promise(e=>setTimeout(e,5e3)),await A(x,t),N(!0)}catch(e){console.error("Error saat inisialisasi:",e),e&&"object"==typeof e&&"logs"in e&&console.error("Logs:",e.logs),p("Gagal inisialisasi: ".concat(e instanceof Error?e.message:String(e)))}finally{w(!1)}},A=async(e,t)=>{if(e)try{let a=new i.BP(l,o,e),s=await a.account.counter.fetch(t);d(s.count.toNumber()),p(null)}catch(e){console.error("Gagal fetch counter:",e),p("Counter belum diinisialisasi. Silakan klik 'Inisialisasi Counter'."),d(0)}},T=async()=>{if(!x||!b){p("Provider atau counter belum diinisialisasi");return}w(!0),p(null);try{let e=new i.BP(l,o,x),t=new i.BN(.01*r.LAMPORTS_PER_SOL),a=await e.methods.increment(t).accounts({counter:b,user:x.wallet.publicKey,systemProgram:r.SystemProgram.programId}).rpc({commitment:"confirmed"});await v.confirmTransaction(a,"confirmed"),await new Promise(e=>setTimeout(e,5e3)),await A(x,b)}catch(e){p("Gagal menambah counter: ".concat(e instanceof Error?e.message:String(e)))}finally{w(!1)}},M=async()=>{if(!x||!b){p("Provider atau counter belum diinisialisasi");return}w(!0),p(null);try{let e=new i.BP(l,o,x),t=new i.BN(.01*r.LAMPORTS_PER_SOL),a=await e.methods.decrement(t).accounts({counter:b,user:x.wallet.publicKey,systemProgram:r.SystemProgram.programId}).rpc({commitment:"confirmed"});await v.confirmTransaction(a,"confirmed"),await new Promise(e=>setTimeout(e,5e3)),await A(x,b)}catch(e){p("Gagal mengurangi counter: ".concat(e instanceof Error?e.message:String(e)))}finally{w(!1)}};return(0,n.useEffect)(()=>{k()},[]),(0,s.jsxs)("main",{className:"min-h-screen bg-white text-black",children:[(0,s.jsxs)("header",{className:"w-full px-6 py-4 border-b border-gray-800 bg-black flex items-center justify-between sticky top-0 z-10",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"Solana Counter"})}),(0,s.jsx)("div",{children:m?(0,s.jsx)("button",{onClick:()=>{try{let{solana:e}=window;e&&e.disconnect(),t(null),u(!1),g(null),f(null),p(null),N(!1)}catch(e){p("Error saat memutuskan: ".concat(e instanceof Error?e.message:String(e)))}},className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg text-white font-medium text-sm transition-all",disabled:h,children:e?"".concat(e.slice(0,4),"...").concat(e.slice(-4)):"Disconnect"}):(0,s.jsx)("button",{onClick:P,className:"px-4 py-2 bg-[#7B2CBF] hover:bg-[#6A24A8] rounded-lg text-white font-medium text-sm transition-all",disabled:h,children:"Connect Wallet"})})]}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-12 flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"w-full max-w-lg mb-12 rounded-2xl bg-white-800 border border-gray-700",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(m?"bg-[#7B2CBF]":"bg-red-400")}),(0,s.jsx)("span",{className:"text-sm font-medium text-black",children:m?"Connected to Solana Devnet":"Not Connected"})]}),b&&(0,s.jsxs)("div",{className:"text-xs text-white bg-[#7B2CBF] px-2 py-1 rounded-md",children:[b.toString().slice(0,6),"...",b.toString().slice(-4)]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"flex-1 h-px bg-gray-700"}),(0,s.jsx)("span",{className:"px-4 text-xs uppercase tracking-wider text-black font-medium",children:"Transaction Info"}),(0,s.jsx)("div",{className:"flex-1 h-px bg-gray-700"})]}),(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-black",children:"Network"}),(0,s.jsxs)("span",{className:"text-sm font-medium flex items-center text-black",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-[#7B2CBF] rounded-full mr-2"}),"Devnet"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-black",children:"Cost Per Transaction"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"0.01 SOL"})]})]})]}),(0,s.jsx)("div",{className:"w-full max-w-md rounded-3xl bg-white border border-gray-700 p-10 mb-8",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("h3",{className:"text-xl font-medium mb-6 text-black",children:"Current Counter Value"}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 mb-8",children:[(0,s.jsx)("button",{onClick:M,className:"w-14 h-14 flex items-center justify-center rounded-full bg-gray-700 hover:bg-gray-600 text-white text-3xl font-bold shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:!m||!b||h,children:"-"}),(0,s.jsx)("div",{className:"text-6xl font-bold text-[#7B2CBF]",children:a}),(0,s.jsx)("button",{onClick:T,className:"w-14 h-14 flex items-center justify-center rounded-full bg-[#7B2CBF] hover:bg-[#6A24A8] text-white text-3xl font-bold shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:!m||!b||h,children:"+"})]}),!j&&(0,s.jsx)("button",{onClick:E,className:"w-full py-3 bg-[#7B2CBF] hover:bg-[#6A24A8] rounded-xl text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:h||!m,children:"Initialize Counter"})]})}),h&&(0,s.jsx)("div",{className:"w-full max-w-md bg-[#7B2CBF] bg-opacity-20 border border-[#6A24A8] rounded-xl p-4 mb-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),(0,s.jsx)("p",{className:"text-white text-sm",children:"Processing transaction... Please approve in your wallet."})]})}),y&&(0,s.jsx)("div",{className:"w-full max-w-md bg-red-900 bg-opacity-20 border border-red-800 rounded-xl p-4",children:(0,s.jsx)("p",{className:"text-red-300 text-sm",children:y})})]}),(0,s.jsx)("footer",{className:"w-full py-6 px-4 border-t border-gray-800 mt-auto",children:(0,s.jsxs)("div",{className:"container mx-auto flex flex-col md:flex-row justify-between items-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4 md:mb-0",children:"Built with Solana, Anchor & Next.js"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"Running on"}),(0,s.jsx)("span",{className:"text-xs font-medium px-2 py-1 bg-[#7B2CBF] bg-opacity-30 border border-[#6A24A8] rounded-md text-white",children:"Solana Devnet"})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[33,956,867,282,441,587,358],()=>t(6755)),_N_E=e.O()}]);